@using Microsoft.AspNetCore.Identity
@model StickerSwap.Data.Sticker
@inject SignInManager<StickerSwap.Data.User> SignInManager

@{
    ViewData["Title"] = Model.Title;
}

<div class="jumbotron">
    <h1 class="display-4">@Model.Title</h1>
    <img src="/sticker/image/@Model.Id" class="rounded mx-auto d-block border" style="width: 18em" />
    <p class="lead">@Model.Description</p>
    <p class="lead">@Model.Height" x @Model.Width"</p>
    <hr class="my-4">
    <p>@Model.Quantity Available</p>
    <hr class="my-4">

    @if (Model.User.Id == SignInManager.UserManager.GetUserId(User))
    {
        <div class="alert alert-primary" role="alert">
            This is your sticker!
        </div>

        <a asp-controller="Sticker" asp-action="Update" asp-route-id="@Model.Id" class="btn btn-primary">Edit</a>
    }
    else if ((int)ViewData["credits"] > 0)
    {
    <form method="post" asp-action="Create" asp-controller="Swap">

        <input type="hidden" value="@Model.Id" name="stickerId" />

        <div class="form-group">
            <label asp-for="Quantity" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                <input asp-for="Quantity" class="form-control" />
                <span asp-validation-for="Quantity" class="text-danger"></span>
            </div>
        </div>

        <input type="submit" value="Pick" class="btn btn-primary" />

    </form>

    }
    else
    {
    <div class="alert alert-danger" role="alert">
        You're out of credits! You can earn more credits by <a asp-action="Create" asp-controller="Sticker">sharing stickers</a> or <a asp-action="Invite" asp-controller="About">inviting your friends</a>.
    </div>
    }

</div>
